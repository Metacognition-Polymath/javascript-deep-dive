# 48. 모듈

## 48.1 모듈의 일반적 의미

- 어플리케이션을 구성하는 개별적 요소로서 `재사용 가능한 코드조각`
- 모듈은 기능을 기준으로 파일 단위로 분리한다
- 모듈이 성립하려면 모듈은 자신만의 파일 스코프(모듈 스코프)를 가질 수 있어야 한다

## 48.2 자바스크립트와 모듈

- 자바스크립트는 import, export를 지원하지 않았다
- 자바스크립트 파일마다 독립적인 파일 스코프를 갖지 않는다
  - 모든 자바스크립트파일은 하나의 전역을 공유한다
  - 분리된 자바스크립트 파일들의 전역 변수가 중복되는 등의 문제가 발생할 수 있다
- 자바스크립트의 모듈 시스템은 크게 CommonJS와 AMD 진영으로 나뉘게 되었고 브라우저 환경에서
  모듈을 사용하기 위해서는 CommonJS또는 AMD를 구현한 모듈 로더 라이브러리를 사용해야하는 상황이 되었다

- Node.js는 모듈 시스템의 사실상 표준인 CommonJS를 채택했고 독자적인 진화를 거쳐,
  현재는 CommonJS 사양과 100%동일하진 않지만 기본적으로 따르고 있다
- 즉, Node.js는 ECMAScript 표준 사양은 아니지만 모듈 시스템을 지원한다

## 48.3 ES6 모듈(ESM)

### 48.3.1 모듈 스코프

- 클라이언트 사이드 자바스크립트에서 모듈기능 추가
  - ES6의 ESM
  - script태그에 type="module" 어트리뷰트를 추가하면 자바스크립트 파일은 모듈로서 동작한다
  - 일반 자바스크립트 파일이 아닌 ESM임을 명확히 하기 위해 파일 확장자는 mjs를 사용할 것을 권장한다
- 모듈 내에선 같은 스코프가 형성되는 것 같다

### 48.3.2 export 키워드

- 모듈은 독자적인 모듈 스코프를 갖는다
- 모듈 내부에서 선언한 모든 식별자는 기본적으로 해당 모듈 내부에서만 참조할 수 있다
- 모듈 내부에서 선언한 식별자를 외부에 공개하여 다른 모듈들이 사용하게 하려면 선언문 앞에 export키워드를 사용한다
